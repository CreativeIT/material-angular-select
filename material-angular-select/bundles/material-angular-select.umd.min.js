!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("material-design-lite/material"),require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("material-angular-select",["exports","material-design-lite/material","@angular/common","@angular/core"],t):t(e["material-angular-select"]={},null,e.ng.common,e.ng.core)}(this,function(e,t,a,i){"use strict";var n=function(){function e(e){var t;this.changeDetector=e,this.data=[],this.label="",this.name="",this.fixHeight=!1,this.isFloatingLabel=!0,this.disabled=!1,this.arrow=!0,this.keys={value:"value",title:"title"},this.currentValue=((t={})[this.keys.title]="",t[this.keys.value]="",t),this.selectedValue=new i.EventEmitter,this.opened=!1,this.isFocused=!1,this.dataArray=[],this.isViewInit=!1,this.todoAfterInit=[],this.arrowkeyLocation=0,this.isKeyNavigation=!1}return e.prototype.ngOnInit=function(){this.id="id-"+this.name+"-"+Math.round(100*Math.random()+100),this.changeDetector.detach()},e.prototype.ngOnChanges=function(e){var t=this;e.hasOwnProperty("classStyle")&&e.classStyle.currentValue.forEach(function(e){t.dropdown.nativeElement.classList.add(e)}),e.hasOwnProperty("data")&&(this.isViewInit?this.loadData():this.todoAfterInit.push(this.loadData.bind(this))),e.hasOwnProperty("currentValue")&&(this.isViewInit?(this.setCurrentValue(e.currentValue.currentValue),this.setSelectedItem(this.currentValue)):this.todoAfterInit.push(this.setCurrentValue.bind(this,e.currentValue.currentValue))),e.hasOwnProperty("name")||(this.name=""===this.name?this.label.replace(/\s/g,""):this.name),componentHandler.upgradeElements(this.dropdown.nativeElement)},e.prototype.setCurrentValue=function(e){var t;e&&(this.currentValue="string"==typeof e?((t={})[this.keys.value]=e,t[this.keys.title]=e,t):e)},e.prototype.loadData=function(){var a=this;0<this.data.length&&("string"==typeof this.data[0]&&(this.dataArray=[],this.data.forEach(function(e){var t;a.dataArray.push(((t={})[a.keys.value]=e,t[a.keys.title]=e,t))})),"object"==typeof this.data[0]&&(this.dataArray=this.data)),this.disabled=this.dataArray.length<1||this.disabled},e.prototype.ngAfterViewInit=function(){this.isViewInit=!0,this.todoAfterInit.forEach(function(e){return e.call()}),this.todoAfterInit=[],this.setSelectedItem(this.currentValue),this.changeDetector.detectChanges(),this.changeDetector.reattach()},e.prototype.menuKeyDown=function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),this.isKeyNavigation=!0;var t=this.menu.nativeElement.parentElement.classList.contains("is-visible");switch(e.keyCode){case 38:this.arrowkeyLocation=0<this.arrowkeyLocation?this.arrowkeyLocation-1:this.dataArray.length-1;break;case 40:this.arrowkeyLocation=this.arrowkeyLocation>=this.dataArray.length-1?0:this.arrowkeyLocation+1;break;case 13:t?(this.setCurrentValue(this.data[this.arrowkeyLocation]),this.closeMenu()):this.openMenu();break;case 27:this.closeMenu()}},e.prototype.keyDownTab=function(e){var t=this.menu.nativeElement.parentElement.classList.contains("is-visible");switch(e.keyCode){case 9:t&&this.closeMenu()}},e.prototype.onInputClick=function(e){if(e.stopPropagation(),!this.disabled){var t=this.menu.nativeElement.parentElement.classList.contains("is-visible");this.hideAllMenu(),t?(this.isFocused=!1,this.opened=!1):this.openMenu()}},e.prototype.openMenu=function(){var t=this;this.arrowkeyLocation=this.dataArray.findIndex(function(e){return e[t.keys.value]===t.currentValue[t.keys.value]}),this.menu.nativeElement.MaterialMenu.show(),this.isFocused=!0,this.opened=!0},e.prototype.closeMenu=function(){this.hideAllMenu(),this.isFocused=!1,this.opened=!1},e.prototype.hideAllMenu=function(){document.querySelectorAll(".material-angular-select").forEach(function(e){e.querySelector(".mdl-js-menu").MaterialMenu.hide()})},e.prototype.setSelectedItem=function(e){var t=this;if(e)if(this.currentValue=e,this.selectedValue.emit(e),this.dropdown.nativeElement.MaterialTextfield.change(this.currentValue[this.keys.title]),setTimeout(function(){t.dropdown.nativeElement.MaterialTextfield.updateClasses_()},250),"createEvent"in document){var a=document.createEvent("HTMLEvents");a.initEvent("change",!1,!0),this.menu.nativeElement.MaterialMenu.hide(),this.input.nativeElement.dispatchEvent(a)}else this.input.nativeElement.fireEvent("onchange")},e.decorators=[{type:i.Component,args:[{selector:"material-angular-select",template:'<div #dropdown class="mdl-textfield mdl-js-textfield material-angular-select"\n     [class.is-focused]="isFocused"\n     [class.mdl-textfield--floating-label]="isFloatingLabel"\n     [class.material-angular-select__fix-height]="fixHeight">\n  <input #input\n         (click)="onInputClick($event)"\n         (keyup)="menuKeyDown($event)"\n         (keydown)="keyDownTab($event)"\n         (mouseenter)="isKeyNavigation = false;"\n         class="mdl-textfield__input" type="text"\n         [id]="id" tabindex="0" readonly\n         [value]="(disabled)? \'\' : currentValue[keys.title]"\n         [disabled]="disabled"/>\n  <input #hiddenInput tabindex="-1" type="hidden" [name]="name" [value]="(disabled) ? \'\': currentValue[keys.value]"/>\n  <label class="mdl-textfield__label" [for]="id">{{ label }}</label>\n  <ul #menu class="mdl-menu mdl-menu--bottom-left mdl-js-menu">\n    <li #li *ngFor="let item of dataArray; index as i;" [attr.data-val]="item[keys.value]" class="mdl-menu__item"\n        (click)="setSelectedItem(item)"\n        [ngClass]="{\'is-item-hover\': i === arrowkeyLocation && isKeyNavigation }"\n        tabindex="-1">\n      {{ item[keys.title] }}\n    </li>\n  </ul>\n  <label [for]="id" (click)="onInputClick($event)" *ngIf="arrow">\n    <i #arrow class="mdl-icon-toggle__label material-icons">arrow_drop_down</i>\n  </label>\n</div>\n',encapsulation:i.ViewEncapsulation.None,styles:["material-angular-select{display:block;outline:0;width:100%}material-angular-select .mdl-textfield__input{cursor:pointer}material-angular-select .mdl-textfield__input:focus{outline:0}material-angular-select .mdl-textfield__label::after{bottom:22px}material-angular-select label{display:block;margin-bottom:0}material-angular-select .mdl-icon-toggle__label{float:right;margin-top:-30px;color:rgba(0,0,0,.87);-webkit-transform:rotate(0);transform:rotate(0);transition:transform .3s;transition:transform .3s,-webkit-transform .3s}material-angular-select.is-focused .mdl-icon-toggle__label{color:#3f51b5;-webkit-transform:rotate(180deg);transform:rotate(180deg)}material-angular-select .is-item-hover{background-color:#eee}material-angular-select .mdl-menu__container{width:100%!important;margin-top:2px}material-angular-select .mdl-menu__container .mdl-menu{width:100%}material-angular-select .mdl-menu__container .mdl-menu .mdl-menu__item{font-size:16px}material-angular-select.has-placeholder .mdl-textfield__label,material-angular-select.is-dirty .mdl-textfield__label,material-angular-select.is-focused .mdl-textfield__label{color:#3f51b5}material-angular-select ::-webkit-scrollbar{width:.5rem;height:.5rem}material-angular-select ::-webkit-scrollbar-thumb{background:#666;cursor:pointer}material-angular-select ::-webkit-scrollbar-track{background:#999}.material-angular-select__fix-height .mdl-menu__container .mdl-menu{overflow-y:auto;max-height:288px!important}.material-angular-select__fix-height .mdl-menu.mdl-menu--top-left{bottom:auto;top:0}"]}]}],e.ctorParameters=function(){return[{type:i.ChangeDetectorRef}]},e.propDecorators={data:[{type:i.Input}],label:[{type:i.Input}],name:[{type:i.Input}],fixHeight:[{type:i.Input}],isFloatingLabel:[{type:i.Input}],disabled:[{type:i.Input}],classStyle:[{type:i.Input}],arrow:[{type:i.Input}],keys:[{type:i.Input}],currentValue:[{type:i.Input}],selectedValue:[{type:i.Output}],dropdown:[{type:i.ViewChild,args:["dropdown"]}],input:[{type:i.ViewChild,args:["input"]}],hiddenInput:[{type:i.ViewChild,args:["hiddenInput"]}],menu:[{type:i.ViewChild,args:["menu"]}],list:[{type:i.ViewChildren,args:["li"]}]},e}(),l=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{declarations:[n],imports:[a.CommonModule],exports:[n]}]}],e}();e.MaterialAngularSelectComponent=n,e.MaterialAngularSelectModule=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=material-angular-select.umd.min.js.map