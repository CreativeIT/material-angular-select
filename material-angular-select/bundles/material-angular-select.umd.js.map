{"version":3,"file":"material-angular-select.umd.js.map","sources":["ng://material-angular-select/lib/material-angular-select.component.ts","ng://material-angular-select/lib/material-angular-select.module.ts"],"sourcesContent":["import 'material-design-lite/material';\n\ndeclare var componentHandler: any;\n\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  QueryList,\n  SimpleChanges,\n  ViewChild,\n  ViewChildren,\n  ViewEncapsulation,\n} from '@angular/core';\n\n@Component({\n  selector: 'material-angular-select', // tslint:disable-line\n  styleUrls: ['./material-angular-select.component.scss'],\n  templateUrl: './material-angular-select.component.html',\n  encapsulation: ViewEncapsulation.None, // tslint:disable-line\n})\n\nexport class MaterialAngularSelectComponent implements OnInit, OnChanges, AfterViewInit {\n  @Input() public data: any[] = [];\n  @Input() public label = '';\n  @Input() public name = '';\n  @Input() public fixHeight = false;\n  @Input() public isFloatingLabel = true;\n  @Input() public disabled = false;\n  @Input() public classStyle: string[];\n  @Input() public arrow = true;\n  @Input() public keys = { // required if use array of object with different structure\n    value: 'value',\n    title: 'title',\n  };\n  @Input() public currentValue = {\n    [this.keys.title]: '',\n    [this.keys.value]: '',\n  };\n\n  @Output() public selectedValue = new EventEmitter();\n\n  public id: string;\n\n  @ViewChild('dropdown') dropdown: ElementRef;\n  @ViewChild('input') input: ElementRef;\n  @ViewChild('hiddenInput') hiddenInput: ElementRef;\n  @ViewChild('menu') menu: ElementRef;\n  @ViewChildren('li') list: QueryList<ElementRef>;\n\n  private opened = false;\n  public isFocused = false;\n  public dataArray = [];\n  private isViewInit = false;\n  private todoAfterInit = [];\n  public arrowkeyLocation = 0;\n  public isKeyNavigation = false;\n\n  public constructor(private changeDetector: ChangeDetectorRef) {\n\n  }\n\n  public ngOnInit() {\n    this.id = `id-${this.name}-${Math.round(Math.random() * 100 + 100)}`;\n    this.changeDetector.detach();\n  }\n\n  public ngOnChanges(changes: SimpleChanges) {\n    if (changes.hasOwnProperty('classStyle')) {\n      changes.classStyle.currentValue.forEach((style) => {\n        this.dropdown.nativeElement.classList.add(style);\n      });\n    }\n\n    if (changes.hasOwnProperty('data')) {\n      if (!this.isViewInit) {\n        this.todoAfterInit.push(this.loadData.bind(this));\n      } else {\n        this.loadData();\n      }\n    }\n\n    if (changes.hasOwnProperty('currentValue')) {\n      if (!this.isViewInit) {\n        this.todoAfterInit.push(this.setCurrentValue.bind(this, changes.currentValue.currentValue));\n      } else {\n        this.setCurrentValue(changes.currentValue.currentValue);\n        this.setSelectedItem(this.currentValue);\n      }\n    }\n\n    if (!changes.hasOwnProperty('name')) {\n      this.name = (this.name === '') ? this.label.replace(/\\s/g, '') : this.name;\n    }\n    componentHandler.upgradeElements(this.dropdown.nativeElement);\n  }\n\n  private setCurrentValue(item) {\n    if (!item) {\n      return;\n    }\n    if (typeof item === 'string') {\n      this.currentValue = {\n        [this.keys.value]: item,\n        [this.keys.title]: item,\n      };\n    } else {\n      this.currentValue = item;\n    }\n  }\n\n  private loadData() {\n    if (this.data.length > 0) {\n      if (typeof this.data[0] === 'string') {\n        this.dataArray = [];\n        this.data.forEach((item) => {\n          this.dataArray.push({\n            [this.keys.value]: item,\n            [this.keys.title]: item,\n          });\n        });\n      }\n      if (typeof this.data[0] === 'object') {\n        this.dataArray = this.data;\n      }\n    }\n    this.disabled = this.dataArray.length < 1 || this.disabled;\n  }\n\n  public ngAfterViewInit() {\n    this.isViewInit = true;\n    this.todoAfterInit.forEach(func => func.call());\n    this.todoAfterInit = [];\n    this.setSelectedItem(this.currentValue);\n    this.changeDetector.detectChanges();\n    this.changeDetector.reattach();\n  }\n\n  public menuKeyDown(event: KeyboardEvent) {\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    event.preventDefault();\n\n    this.isKeyNavigation = true;\n    const isVisible = this.menu.nativeElement.parentElement.classList.contains('is-visible');\n    switch (event.keyCode) {\n      case 38: // arrow up\n        this.arrowkeyLocation = this.arrowkeyLocation > 0 ? this.arrowkeyLocation - 1 : this.dataArray.length - 1;\n        break;\n      case 40: // arrow down\n        this.arrowkeyLocation = this.arrowkeyLocation >= (this.dataArray.length - 1) ? 0 : this.arrowkeyLocation + 1;\n        break;\n      case 13: // enter\n        if (isVisible) {\n          this.setCurrentValue(this.data[this.arrowkeyLocation]);\n          this.closeMenu();\n        } else {\n          this.openMenu();\n        }\n        break;\n      case 27: // esc\n        this.closeMenu();\n        break;\n    }\n  }\n\n  public keyDownTab(event) {\n    const isVisible = this.menu.nativeElement.parentElement.classList.contains('is-visible');\n    switch (event.keyCode) {\n      case 9: // tab\n        if (isVisible) {\n          this.closeMenu();\n        }\n        break;\n    }\n  }\n\n  public onInputClick(e) {\n    e.stopPropagation();\n    if (this.disabled) {\n      return;\n    }\n\n    const isVisible = this.menu.nativeElement.parentElement.classList.contains('is-visible');\n    this.hideAllMenu();\n    if (!isVisible) {\n      this.openMenu();\n    } else {\n      this.isFocused = false;\n      this.opened = false;\n    }\n  }\n\n  private openMenu() {\n    this.arrowkeyLocation = this.dataArray.findIndex(item => item[this.keys.value] === this.currentValue[this.keys.value]);\n    this.menu.nativeElement['MaterialMenu'].show();\n    this.isFocused = true;\n    this.opened = true;\n  }\n\n  private closeMenu() {\n    this.hideAllMenu();\n    this.isFocused = false;\n    this.opened = false;\n  }\n\n  private hideAllMenu() {\n    const allSelects = document.querySelectorAll('.material-angular-select') as any;\n    allSelects.forEach((select: HTMLElement) => {\n      const menu = select.querySelector('.mdl-js-menu');\n      menu['MaterialMenu'].hide();\n    });\n  }\n\n  public setSelectedItem(item) {\n    if (!item) {\n      return;\n    }\n    this.currentValue = item;\n    this.selectedValue.emit(item);\n    this.dropdown.nativeElement.MaterialTextfield.change(this.currentValue[this.keys.title]); // handles css class changes\n    setTimeout(() => {\n      this.dropdown.nativeElement.MaterialTextfield.updateClasses_(); // update css class\n    },\n               250);\n\n    if ('createEvent' in document) {\n      const evt = document.createEvent('HTMLEvents');\n      evt.initEvent('change', false, true);\n      this.menu.nativeElement['MaterialMenu'].hide();\n      this.input.nativeElement.dispatchEvent(evt);\n    } else {\n      this.input.nativeElement.fireEvent('onchange');\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { MaterialAngularSelectComponent } from './material-angular-select.component';\n\n@NgModule({\n  declarations: [MaterialAngularSelectComponent],\n  imports: [\n    CommonModule,\n  ],\n  exports: [MaterialAngularSelectComponent],\n})\nexport class MaterialAngularSelectModule { }\n"],"names":["EventEmitter","Component","ViewEncapsulation","ChangeDetectorRef","Input","Output","ViewChild","ViewChildren","NgModule","CommonModule"],"mappings":"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"}
